# Viteã‚µãƒ¼ãƒãƒ¼WSLèµ·å‹•ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

**ä½œæˆæ—¥**: 2025-07-04  
**å¯¾è±¡**: WSL2ç’°å¢ƒã§ã®Viteé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•å•é¡Œ

## æ¦‚è¦

WSL2ç’°å¢ƒã§Viteã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒã€Œèµ·å‹•ã—ãŸã‚ˆã†ã«è¦‹ãˆã‚‹ãŒå®Ÿéš›ã«ã¯æ¥ç¶šã§ããªã„ã€å•é¡Œã®è§£æ±ºãƒã‚¦ãƒã‚¦é›†ã§ã™ã€‚

## ç—‡çŠ¶ãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸš¨ å…¸å‹çš„ãªç—‡çŠ¶
```bash
npm run dev
# â†“ ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
VITE v6.3.5  ready in 830 ms
âœ  Local:   http://localhost:3000/
âœ  Network: http://10.255.255.254:3000/
âœ  Network: http://172.24.145.243:3000/

# ã—ã‹ã—æ¥ç¶šãƒ†ã‚¹ãƒˆã¯å¤±æ•—
curl http://localhost:3000/
# â†’ curl: (7) Failed to connect to localhost port 3000: Connection refused
```

### ğŸ” å•é¡Œã®ç‰¹å¾´
- ViteãŒèµ·å‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚æ­£ã—ãè¡¨ç¤º
- ã—ã‹ã—å®Ÿéš›ã®HTTPæ¥ç¶šã¯å¤±æ•—

## è¨ºæ–­æ‰‹é †

### 1. ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
```bash
# Viteãƒ—ãƒ­ã‚»ã‚¹ãŒå®Ÿéš›ã«å‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèª
ps aux | grep vite | grep -v grep

# æœŸå¾…ã™ã‚‹çµæœä¾‹:
# user 12345 ... node node_modules/.bin/vite --host 0.0.0.0 --port 3000
```

**é‡è¦**: èµ·å‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã‚‚ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒå­˜åœ¨ã—ãªã„å ´åˆãŒã‚ã‚‹

### 2. ãƒãƒ¼ãƒˆç›£è¦–ç¢ºèª
```bash
# ãƒãƒ¼ãƒˆã§ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ss -tlnp | grep :3000
# ã¾ãŸã¯
lsof -i :3000

# ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ = ãƒãƒ¼ãƒˆã§ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã—ã¦ã„ãªã„
```

### 3. è©³ç´°ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°å®Ÿè¡Œ
```bash
# Viteã®å†…éƒ¨å‹•ä½œã‚’å®Œå…¨ã«å¯è¦–åŒ–
DEBUG=vite:* npm run dev

# ã¾ãŸã¯ç›´æ¥Nodeå®Ÿè¡Œ
DEBUG=vite:* node node_modules/.bin/vite --host 0.0.0.0 --port 5173
```

### 4. æ®µéšçš„æ¥ç¶šãƒ†ã‚¹ãƒˆ
```bash
# 1. åŸºæœ¬æ¥ç¶šãƒ†ã‚¹ãƒˆ
curl -v http://localhost:5173/

# 2. HTTPãƒ˜ãƒƒãƒ€ãƒ¼ç¢ºèª
curl -I http://localhost:5173/

# 3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ç¢ºèª
curl -s http://localhost:5173/ | head -10
```

## ä¸€èˆ¬çš„ãªè§£æ±ºæ–¹æ³•

### Method 1: å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
```bash
# 1. æ—¢å­˜ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
pkill -f vite

# 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf node_modules/.vite
rm -rf node_modules package-lock.json

# 3. npmã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm cache clean --force

# 4. ä¾å­˜é–¢ä¿‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# 5. èµ·å‹•
npm run dev
```

### Method 2: è¨­å®šç¢ºèªãƒ»ä¿®æ­£

#### vite.config.ts ã®ç¢ºèª
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,          // ãƒãƒ¼ãƒˆæ˜ç¤º
    host: '0.0.0.0',     // WSL2ã§ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯
    strictPort: false    // ãƒãƒ¼ãƒˆç«¶åˆæ™‚ã®è‡ªå‹•å¤‰æ›´
  }
})
```

#### package.json ã®ç¢ºèª
```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "preview": "vite preview"
  }
}
```

### Method 3: ä»£æ›¿ãƒãƒ¼ãƒˆã§ã®å®Ÿè¡Œ
```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆä»¥å¤–ã§è©¦è¡Œ
npm run dev -- --port 5173
npm run dev -- --port 8080

# ç›´æ¥Nodeå®Ÿè¡Œ
node node_modules/.bin/vite --host 0.0.0.0 --port 5173
```

## ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã®èª­ã¿æ–¹

### æ­£å¸¸ãªèµ·å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
```
2025-07-04T00:39:11.716Z vite:config config file loaded in 149.45ms
2025-07-04T00:39:11.716Z vite:deps (client) Hash is consistent. Skipping.

VITE v6.3.5  ready in 830 ms
âœ  Local:   http://localhost:5173/
```

### HTTPå‡¦ç†ãƒ­ã‚°ä¾‹
```
2025-07-04T00:39:43.298Z vite:html-fallback Rewriting GET / to /index.html
2025-07-04T00:39:43.332Z vite:time 36.01ms /index.html
2025-07-04T00:39:43.333Z vite:resolve 5.71ms /src/main.tsx
```

**ã“ã®ãƒ­ã‚°ãŒè¦‹ãˆã‚‹ = HTTPã‚µãƒ¼ãƒãƒ¼ãŒæ­£å¸¸å‹•ä½œ**

## è¨­å®šã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å‡¦

### Tailwind CSS PostCSS ã‚¨ãƒ©ãƒ¼
```
[postcss] It looks like you're trying to use `tailwindcss` directly as a PostCSS plugin.
The PostCSS plugin has moved to a separate package
```

**å¯¾å‡¦æ³•**:
```bash
npm install @tailwindcss/postcss
```

### TypeScriptè¨­å®šã‚¨ãƒ©ãƒ¼
```bash
# tsconfig.jsonã®ç¢ºèª
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "jsx": "react-jsx"
  }
}
```

## WSL2ç‰¹æœ‰ã®æ³¨æ„ç‚¹

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š
```bash
# WSLã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ç¢ºèª
hostname -I

# Windowså´ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ç”¨URL
# http://172.24.145.243:5173/ (ä¾‹)
```

### ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ç¢ºèª
Windowså´ã®ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãŒWSL2ã®ãƒãƒ¼ãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ã‚‹å¯èƒ½æ€§

### ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
å¿…è¦ã«å¿œã˜ã¦Windowsã§ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š

## ç¢ºå®Ÿãªå‹•ä½œç¢ºèªæ‰‹é †

### 1. WSLå†…ã§ã®ç¢ºèª
```bash
# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep vite

# HTTPæ¥ç¶šç¢ºèª
curl -v http://localhost:5173/

# HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¢ºèª
curl -s http://localhost:5173/ | grep -i "<!doctype\|html\|title"
```

### 2. Windowså´ã§ã®ç¢ºèª
```powershell
# WSLã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—
wsl hostname -I

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
# http://localhost:5173/
# http://[WSL_IP]:5173/
```

## ã‚ˆãã‚ã‚‹é–“é•ã„

### âŒ èµ·å‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿¡ã˜ã™ãã‚‹
- èµ·å‹•ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã‚‚å®Ÿéš›ã®ã‚µãƒ¼ãƒãƒ¼ãŒå‹•ã„ã¦ã„ãªã„å ´åˆãŒã‚ã‚‹
- å¿…ãšãƒ—ãƒ­ã‚»ã‚¹ç¢ºèªã¨HTTPæ¥ç¶šãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

### âŒ æ¥ç¶šãƒ†ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- Viteèµ·å‹•ç›´å¾Œã¯åˆæœŸåŒ–å‡¦ç†ä¸­ã®å ´åˆãŒã‚ã‚‹
- æ•°ç§’å¾…ã£ã¦ã‹ã‚‰æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

### âŒ ãƒãƒ¼ãƒˆç«¶åˆã®è¦‹è½ã¨ã—
- ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§
- `ss -tlnp | grep :PORT` ã§ç¢ºèª

## æˆåŠŸã®åˆ¤å®šåŸºæº–

### âœ… æ­£å¸¸å‹•ä½œã®è¨¼æ‹ 
1. **ãƒ—ãƒ­ã‚»ã‚¹å­˜åœ¨**: `ps aux | grep vite` ã§ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
2. **ãƒãƒ¼ãƒˆç›£è¦–**: `ss -tlnp | grep :5173` ã§ãƒªã‚¹ãƒ‹ãƒ³ã‚°ç¢ºèª  
3. **HTTPæ¥ç¶š**: `curl -v http://localhost:5173/` ã§æ¥ç¶šæˆåŠŸ
4. **HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹**: HTMLãŒæ­£å¸¸ã«è¿”ã•ã‚Œã‚‹
5. **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: HTTPå‡¦ç†ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹

### ğŸ¯ æœ€çµ‚ç›®æ¨™
- WSLå†…ã‹ã‚‰ã®æ¥ç¶šæˆåŠŸ
- Windowså´ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®æ¥ç¶šæˆåŠŸ
- React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ­£å¸¸è¡¨ç¤º

## ã¾ã¨ã‚

Viteã®WSL2å•é¡Œã¯è¡¨é¢çš„ã«ã¯è¤‡é›‘ã«è¦‹ãˆã‚‹ãŒã€ç³»çµ±çš„ã«ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã“ã¨ã§å¿…ãšè§£æ±ºã§ãã‚‹ã€‚**ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã¨æ®µéšçš„ãƒ†ã‚¹ãƒˆ**ãŒè§£æ±ºã®éµã§ã‚ã‚‹ã€‚